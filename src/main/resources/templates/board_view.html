<!-- board DB 내용 상세 보기 페이지-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>블로그 게시판(new) - 상세 보기</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-4">
        <h1>게시글 상세 내용</h1>

        <!-- 
            th:object="${board}"를 사용하여 이 <div> 안에서는
            board.id 대신 *{id} 와 같이 축약해서 사용할 수 있습니다.
        -->
        <div th:object="${board}">
            <table class="table table-bordered mt-4">
                <tbody>
                    <tr>
                        <th style="width: 15%;">글번호</th>
                        <!-- 컨트롤러에서 넘겨준 board 객체의 id 필드를 출력합니다. -->
                        <td th:text="*{id}"></td>
                    </tr>
                    <tr>
                        <th>제목</th>
                        <td th:text="*{title}"></td>
                    </tr>
                    <tr>
                        <th>작성자</th>
                        <td th:text="*{user}"></td>
                    </tr>
                    <tr>
                        <th>작성일</th>
                        <td th:text="*{newdate}"></td>
                    </tr>
                    <tr>
                        <th>내용</th>
                        <!-- pre 태그를 사용하면 줄바꿈 등이 그대로 표시됩니다. -->
                        <td><pre th:text="*{content}"></pre></td>
                    </tr>
                </tbody>
            </table>

            <!-- 수정 / 삭제 버튼 영역 -->
            <div th:if="${currentUserEmail == board.user}">
                <!-- 수정 버튼 -->
                <a class="btn btn-warning" th:href="@{/board_edit/{id}(id=${board.id})}">수정</a>

                <!-- 삭제 버튼 폼 -->
                <form th:action="@{/api/board_delete/{id}(id=${board.id})}" method="post" style="display:inline;">
                    <input type="hidden" name="_method" value="delete">
                    <button type="submit" class="btn btn-danger">삭제</button>
                </form>
            </div>

            <!--
            <div>
                수정 버튼: board_edit/{id} 경로로 GET 요청을 보냅니다.
                <a class="btn btn-warning" th:href="@{/board_edit/{id}(id=*{id})}">수정</a>

                
                    [핵심] 삭제 버튼 폼:
                    - th:action: /api/board_delete/{id} 경로로 POST 요청을 보냅니다.
                    - hidden input: 실제로는 DELETE 메소드 요청임을 서버에 알려줍니다.
                <form th:action="@{/api/board_delete/{id}(id=*{id})}" method="post" style="display:inline;">
                    <input type="hidden" name="_method" value="delete">
                    <button type="submit" class="btn btn-danger">삭제</button>
                </form>-->

                <!-- 목록으로 돌아가는 버튼 -->
                <a class="btn btn-secondary" href="/board_list">목록</a>
            </div>
        </div>
    </div>
</body>
</html>